---
permalink: a200/dimm-replace.html 
sidebar: sidebar 
keywords: aff a200, replace the dimms 
summary: 當系統登錄的可修正錯誤修正碼（ECC）數量不斷增加時、您必須更換控制器模組中的DIMM；否則會導致系統嚴重錯誤。 
---
= 更換DIMM AFF - VA200
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
當系統登錄的可修正錯誤修正碼（ECC）數量不斷增加時、您必須更換控制器模組中的DIMM；否則會導致系統嚴重錯誤。

.關於這項工作
* 系統中的所有其他元件都必須正常運作；否則、您必須聯絡技術支援部門。
* 您必須使用從供應商處收到的替換FRU元件來更換故障元件。




== 步驟1：關閉受損的控制器

若要關閉受損的控制器、您必須判斷控制器的狀態、並在必要時接管控制器、以便健全的控制器繼續從受損的控制器儲存設備提供資料。

如果叢集有兩個以上的節點、則叢集必須處於仲裁狀態。如果叢集未達到法定人數、或健全的控制器顯示為「假」、表示符合資格和健全狀況、則您必須在關閉受損的控制器之前修正問題；請參閱 link:https://docs.netapp.com/us-en/ontap/system-admin/index.html["使用CLI進行系統管理總覽"^]。

.步驟
. 如果啟用了此功能、請叫用下列訊息來抑制自動建立案例：「System Node現象叫用節點*-type all -Message MAn=_number_of_hs_dable_h」AutoSupport AutoSupport AutoSupport
+
下列AutoSupport 資訊不顯示自動建立案例兩小時的訊息：「cluster1：*>系統節點AutoSupport 、叫用節點*-輸入ALL -Message MAn=2h」

. 如果受損的控制器是HA配對的一部分、請從健全控制器的主控台停用自動恢復功能：「torage容錯移轉修改節點本機-自動恢復錯誤」
. 將受損的控制器移至載入器提示：
+
[cols="1,2"]
|===
| 如果受損的控制器正在顯示... | 然後... 


 a| 
載入程式提示
 a| 
移至「移除控制器模組」。



 a| 
正在等待恢復...
 a| 
按Ctrl-C、然後回應「y」。



 a| 
系統提示或密碼提示（輸入系統密碼）
 a| 
從正常控制器接管或停止受損的控制器：「torage容錯移轉接管-節點_受損節點_節點名稱_」

+當受損的控制器顯示正在等待恢復...時、請按Ctrl-C、然後回應「y」。

|===
. 如果系統機箱中只有一個控制器模組、請關閉電源供應器、然後從電源插座拔下受損控制器的電源線。




== 步驟2：移除控制器模組

若要存取控制器內部的元件、您必須先從系統中移除控制器模組、然後移除控制器模組上的護蓋。

. 如果您尚未接地、請正確接地。
. 解開將纜線綁定至纜線管理裝置的掛勾和迴圈帶、然後從控制器模組拔下系統纜線和SFP（如有需要）、並追蹤纜線的連接位置。
+
將纜線留在纜線管理裝置中、以便在重新安裝纜線管理裝置時、整理好纜線。

. 從控制器模組的左側和右側移除纜線管理裝置、並將其放在一邊。
+
image::../media/drw_25xx_cable_management_arm.png[DRW 25xx纜線管理ARM 功能]

. 壓下CAM把手上的栓鎖直到釋放為止、完全打開CAM把把、以從中間板釋放控制器模組、然後用兩隻手將控制器模組從機箱中拉出。
+
image::../media/drw_2240_x_opening_cam_latch.png[DRW 2240 x開啟CAM栓鎖]

. 翻轉控制器模組、將其放置在平穩的表面上。
. 滑入藍色彈片以釋放護蓋、然後將護蓋向上旋轉並開啟、即可開啟護蓋。
+
image::../media/drw_2600_opening_pcm_cover.png[DRw 2600開啟PCM機箱蓋]





== 步驟3：更換DIMM

若要更換DIMM、請在控制器內找到DIMM、然後依照特定的步驟順序進行。

如果您要更換DIMM、則必須在從控制器模組拔下NVMEM電池後將其取出。

.步驟
. 如果您尚未接地、請正確接地。
. 檢查控制器模組上的NVMEM LED。
+
在更換系統元件之前、您必須執行乾淨的系統關機、以避免在非揮發性記憶體（NVMEM）中遺失未寫入的資料。LED位於控制器模組背面。尋找下列圖示：

+
image::../media/drw_hw_nvram_icon.png[DRW硬體NVRAM圖示]

. 如果NVMEM LED未更新、則在NVMEM中沒有任何內容；您可以跳過下列步驟、繼續執行本程序中的下一個工作。
. 如果NVMEM LED正在閃燈、則表示NVMEM中有資料、您必須中斷電池連線以清除記憶體：
+
.. 找到電池、按下電池插頭正面的固定夾、將鎖定夾從插槽中鬆脫、然後從插槽拔下電池纜線。
+
image::../media/drw_2600_nvmem_battery_unplug.png[DRW 2600 nvmem電池拔下]

.. 確認NVMEM LED不再亮起。
.. 重新連接電池接頭。


. 返回此程序的步驟2、重新檢查NVMEM LED。
. 找到控制器模組上的DIMM。
+

NOTE: 每個系統記憶體DIMM的每個DIMM插槽旁邊、主機板上都有一個LED。故障的LED每兩秒會閃爍一次。

. 請注意插槽中的DIMM方向、以便您以適當的方向插入替換的DIMM。
. 緩慢地將DIMM兩側的兩個DIMM彈出彈片分開、然後將DIMM從插槽中滑出、藉此將DIMM從插槽中退出。
+

NOTE: 小心拿住DIMM的邊緣、避免對DIMM電路板上的元件施加壓力。

+
系統DIMM的數量和位置取決於您的系統機型。

+
下圖顯示系統DIMM的位置：

+
image::../media/drw_2600_dimm_repl_animated_gif.png[DRW 2600 DIMM重新格式動畫Gif]

. 從防靜電包裝袋中取出備用DIMM、拿住DIMM的邊角、然後將其對準插槽。
+
DIMM插針之間的槽口應與插槽中的卡舌對齊。

. 確定連接器上的DIMM彈出彈片處於開啟位置、然後將DIMM正面插入插槽。
+
DIMM可緊密插入插槽、但應該很容易就能裝入。如果沒有、請重新將DIMM與插槽對齊、然後重新插入。

+

NOTE: 目視檢查DIMM、確認其對齊並完全插入插槽。

. 在DIMM頂端邊緣小心地推入、但穩固地推入、直到彈出彈出彈片卡入DIMM兩端的槽口。
. 找到NVMEM電池插頭插槽、然後擠壓電池纜線插頭正面的固定夾、將其插入插槽。
+
請確定插頭鎖定在控制器模組上。

. 合上控制器模組護蓋。




== 步驟4：重新安裝控制器模組

更換控制器模組中的元件之後、請將其重新安裝到機箱中。

. 如果您尚未接地、請正確接地。
. 如果您尚未更換控制器模組的護蓋、請將其裝回。
. 將控制器模組的一端與機箱的開口對齊、然後將控制器模組輕推至系統的一半。
+

NOTE: 在指示之前、請勿將控制器模組完全插入機箱。

. 視需要重新安裝系統。
+
如果您移除媒體轉換器（QSFP或SFP）、請記得在使用光纖纜線時重新安裝。

. 完成控制器模組的重新安裝：


[cols="1,3"]
|===
| 如果您的系統處於... | 然後執行下列步驟... 


 a| 
HA配對
 a| 
控制器模組一旦完全插入機箱、就會開始開機。準備好中斷開機程序。

. 將CAM握把置於開啟位置時、將控制器模組穩固推入、直到它與中間背板接觸並完全就位、然後將CAM握把關閉至鎖定位置。
+

CAUTION: 將控制器模組滑入機箱時、請勿過度施力、以免損壞連接器。

+
控制器一旦安裝在機箱中、就會開始開機。

. 如果您尚未重新安裝纜線管理裝置、請重新安裝。
. 使用掛勾和迴圈固定帶將纜線綁定至纜線管理裝置。
. 當您看到「Press Ctrl-C for Boot Menu」（按Ctrl-C進入開機功能表）訊息時、請按「Ctrl-C」中斷開機程序。
+

NOTE: 如果您錯過提示、且控制器模組開機ONTAP 至畫面、請輸入「halt」、然後在載入程式提示字元輸入「boot_ONTAP」、並在出現提示時按「Ctrl-C」、然後開機至維護模式。

. 從顯示的功能表中選取要開機至維護模式的選項。




 a| 
獨立組態
 a| 
. 將CAM握把置於開啟位置時、將控制器模組穩固推入、直到它與中間背板接觸並完全就位、然後將CAM握把關閉至鎖定位置。
+

NOTE: 將控制器模組滑入機箱時、請勿過度施力、以免損壞連接器。

. 如果您尚未重新安裝纜線管理裝置、請重新安裝。
. 使用掛勾和迴圈固定帶將纜線綁定至纜線管理裝置。
. 重新連接電源供應器和電源的電源線、開啟電源以啟動開機程序、然後在看到「Press Ctrl-C for Boot Menu（按Ctrl-C啟動選單）」訊息後按「Ctrl-C」。
+

NOTE: 如果您錯過提示、且控制器模組開機ONTAP 至畫面、請輸入「halt」、然後在載入程式提示字元輸入「boot_ONTAP」、並在出現提示時按「Ctrl-C」、然後開機至維護模式。

. 從開機功能表中、選取維護模式選項。


|===


== 步驟5：執行系統層級診斷

安裝新的DIMM之後、您應該執行診斷程式。

您的系統必須處於載入器提示狀態、才能啟動系統層級診斷。

診斷程序中的所有命令都是由要更換元件的控制器發出。

.步驟
. 如果要維修的控制器未出現載入程式提示、請執行下列步驟：
+
.. 從顯示的功能表中選取「維護模式」選項。
.. 控制器開機至維護模式後、停止控制器：「halt（停止）」
+
發出命令之後、您應該等到系統在載入程式提示字元停止。

+

NOTE: 在開機過程中、您可以安全地回應「y」提示：

+
*** 當您在HA組態中進入維護模式時、必須確保健全的控制器保持停機狀態的提示警告。




. 在載入程式提示字元下、存取專為系統層級診斷所設計的特殊驅動程式、以正常運作：「boot_diags'（boot_diags'）
+
在開機過程中、您可以安全地回應提示「y」、直到出現「維護模式」提示（*>）為止。

. 對系統記憶體執行診斷：「ldiag設備執行-devmem」
. 驗證更換DIMM後是否未發生硬體問題：「ldiag設備狀態-devmem -long -stStatus fected'（L診斷 設備狀態-devmem -long狀態失敗）」
+
如果沒有測試失敗、系統層級的診斷會返回提示、或列出測試元件所導致的故障完整狀態。

. 根據上述步驟的結果繼續進行：


[cols="1,3"]
|===
| 如果系統層級的診斷測試... | 然後... 


 a| 
已完成、沒有任何故障
 a| 
. 清除狀態記錄：「ldiag」裝置的清除狀態
. 確認記錄已清除：「ldiag設備狀態」
+
畫面會顯示下列預設回應：

+
SLDIAG：沒有記錄訊息。

. 退出維護模式：「halt」
+
控制器會顯示載入器提示。

. 從載入程式提示字元「bye」開機控制器
. 使控制器恢復正常運作：
+
*如果您的控制器是HA配對*、請執行「回饋」：「儲存容錯移轉回傳回-ofnode_replace_node_name_」

+
*附註：*如果停用自動恢復功能、請使用「儲存容錯移轉修改」命令重新啟用。

+
*如果您的控制器處於獨立組態*、請繼續下一步。無需採取任何行動。

+
您已完成系統層級的診斷。





 a| 
導致某些測試失敗
 a| 
判斷問題的原因：

. 退出維護模式：「halt」
+
發出命令後、請等待系統在載入程式提示字元停止。

. 根據機箱中的控制器模組數量、關閉或離開電源供應器：
+
** 如果機箱中有兩個控制器模組、請讓電源供應器保持開啟狀態、以便為其他控制器模組提供電力。
** 如果機箱中有一個控制器模組、請關閉電源供應器、然後從電源插座拔下它們。


. 確認您已注意到執行系統層級診斷所需的所有考量事項、纜線是否穩固連接、以及硬體元件是否已正確安裝在儲存系統中。
. 引導您正在維修的控制器模組、並在系統提示您進入「Boot（開機）」功能表時按「Ctrl-C」中斷開機：
+
** 如果機箱中有兩個控制器模組、請將您要維修的控制器模組完全裝入機箱。
+
控制器模組完全就位時會開機。

** 如果機箱中有一個控制器模組、請連接電源供應器、然後將其開啟。


. 從功能表中選取開機至維護模式。
. 輸入以下命令退出維護模式：「halt（停止）」
+
發出命令後、請等待系統在載入程式提示字元停止。

. 重新執行系統層級的診斷測試。


|===
. 根據上述步驟的結果繼續進行：
+
[cols="1,3"]
|===
| 如果系統層級的診斷測試... | 然後... 


 a| 
已完成、沒有任何故障
 a| 
.. 清除狀態記錄：「ldiag」裝置的清除狀態
.. 確認記錄已清除：「ldiag設備狀態」
+
畫面會顯示下列預設回應：

+
SLDIAG：沒有記錄訊息。

.. 退出維護模式：「halt」
+
控制器會顯示載入器提示。

.. 從載入程式提示字元「bye」開機控制器
.. 使控制器恢復正常運作：
+
*如果您的控制器是HA配對*、請執行「回饋」：「儲存容錯移轉回傳回-ofnode_replace_node_name_」

+

NOTE: 如果停用自動還原、請使用「儲存容錯移轉修改」命令重新啟用。

+
*如果您的控制器處於獨立組態*、請繼續下一步。無需採取任何行動。

+
您已完成系統層級的診斷。





 a| 
導致某些測試失敗
 a| 
判斷問題的原因：

.. 退出維護模式：「halt」
+
發出命令後、請等待系統在載入程式提示字元停止。

.. 根據機箱中的控制器模組數量、關閉或離開電源供應器：
+
*** 如果機箱中有兩個控制器模組、請讓電源供應器保持開啟狀態、以便為其他控制器模組提供電力。
*** 如果機箱中有一個控制器模組、請關閉電源供應器、然後從電源插座拔下它們。


.. 確認您已注意到執行系統層級診斷所需的所有考量事項、纜線是否穩固連接、以及硬體元件是否已正確安裝在儲存系統中。
.. 引導您正在維修的控制器模組、並在系統提示您進入「Boot（開機）」功能表時按「Ctrl-C」中斷開機：
+
*** 如果機箱中有兩個控制器模組、請將您要維修的控制器模組完全裝入機箱。
+
控制器模組完全就位時會開機。

*** 如果機箱中有一個控制器模組、請連接電源供應器、然後將其開啟。


.. 從功能表中選取開機至維護模式。
.. 輸入以下命令退出維護模式：「halt（停止）」
+
發出命令後、請等待系統在載入程式提示字元停止。

.. 重新執行系統層級的診斷測試。


|===




== 步驟6：將故障零件歸還給NetApp

如套件隨附的RMA指示所述、將故障零件退回NetApp。請參閱 https://mysupport.netapp.com/site/info/rma["產品退貨安培；更換"] 頁面以取得更多資訊。
